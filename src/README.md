# Отчет по заданию "Операционные системы UNIX/Linux (Базовый)".
1. [Установка ОС](#part-1-установка-ос)
2. [Создание пользователя](#part-2-создание-пользователя)
3. [Настройка сети ОС](#part-3-настройка-сети-ос)
4. [Обновление ОС](#part-4-обновление-ос)
5. [Использование команды sudo](#part-5-использование-команды-sudo)
6. [Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)
7. [Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)
8. [Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd)
9. [Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)
10. [Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)
11. [Использование утилиты df](#part-11-использование-утилиты-df)
12. [Использование утилиты du](#part-12-использование-утилиты-du)
13. [Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)
14. [Работа с системными журналами](#part-14-работа-с-системными-журналами)
15. [Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)
## Условия задания
В качестве результата работы должен быть предоставлен отчет по выполненным задачам. В каждой части задания указано, что должно быть помещено в отчёт, после её выполнения. Это могут быть скриншоты, какие-то данные и т.д.
>* В репозиторий, в папку src, должен быть загружен отчёт с расширением .md.
>* В отчёте должны быть выделены все части задания, как заголовки 2-го уровня.
>* В рамках одной части задания всё, что помещается в отчёт, должно быть оформлено в виде списка.
>* Каждый скриншот в отчёте должен быть кратко подписан (что показано на скриншоте).
>* Все скриншоты обрезаны так, чтобы была видна только нужная часть экрана.
## Part 1. Установка ОС
1. Проверка установленной версии Ubuntu:
    ```bash
    cat /etc/issue
    ```
    ![Проверка версии Ubuntu](./images/part_1.jpg "Проверка версии Ubuntu")
## Part 2. Создание пользователя
1. Создание нового пользователя
    ```bash
    sudo adduser hell
    ```
    ![Новый пользователь](./images/part_2.1.png "Новый пользователь")
2. Добавление пользователя **hell** в группу **adm**
    ```bash
    sudo usermod -aG adm hell
    cat /etc/passwd
    ```
    ![Добавление пользователя в группу adm](./images/part_2.2.png "Добавление пользователя в группу adm")
3. Проверка внесения пользователя **hell** в группу **adm**
    ```bash
    vi /etc/group
    ```
    ![Проверка hell в adm](./images/part_2.3.png "Проверка hell в adm")
## Part 3. Настройка сети ОС
1. Задание машине имени **user-1**.
    * Вызов команды sudo `vim /etc/hostname` для смены названия машины
    * Замена старого названия <br>
    ![Старое название](./images/part_3.1.png "Старое название")
    * На новое название <br>
    ![Новое название](./images/part_3.2.png "Новое название")
    * Проверка названия машины после перезагрузки
    ![Новое название](./images/part_3.3.png "Новое название")
2. Установка временной зоны, соотвутствующей моему положению, c помощью команды.
    ```bash
    sudo dpkg-reconfigure tzdata
    ```
    ![Смена времени](./images/part_3.4.png "Смена времени")
3. Вывод названия сетевых интерфейсов с помощью консольной команды.
    ```bash
    ip addr show
    ```
    ![сетевые интерфейсы](./images/part_3.5.png "сетевые интерфейсы")
    lo (local loopback) используется для того, чтобы компьютер мог обращаться к самому себе и имеет по умолчанию ip-адрес 127.0.0.1 на всех компьютерах.
4. Получение ip адреса устройства, от DHCP сервера.<br>
    DHCP (Dynamic Host Configuration Protocol) - это клиент-серверный протокол динамической конфигурации хоста , с помощью которого в ИТ-инфраструктуре сетевые параметры каждого нового устройства прописываются автоматически.<br> 
    ![ip адреса устройства](./images/part_3.6.png "ip адреса устройства")
5. Определение внешнего ip-адреса шлюза и внутреннего IP-адреса шлюза.
    * внешний ip-адрес (ip)<br>
    ![внешний ip-адреса](./images/part_3.7.png "внешний ip-адреса")
    * внутренний ip-адрес (gw)<br>
    ![внутренний ip-адреса](./images/part_3.8.png "внутренний ip-адреса")
6. Установка статичных настроек ip, gw, dns.,br.<br>
    Откроем файл конфигурации **Netplan** командой `sudo nano /etc/netplan/00-installer-config.yaml` и зададим настройки ip, gw, dns.
    ![статические настройки](./images/part_3.9.png "статические настройки")
7. После перезагрузки виртуальной машины настройки не изменились. Пингование удаленных хостов 1.1.1.1 и ya.ru прошло успешно.
    ![ping 1.1.1.1](./images/part_3.10.png "ping 1.1.1.1")
    ![ping ya.ru](./images/part_3.10.png "ping ya.ru")
## Part 4. Обновление ОС
1. Для обновления системных пакетов до последней на момент выполнения задания изпользуем команду `sudo apt update && sudo apt upgrade`
2. После повторного вызова данной команды получим следующий результат:
    ![обновление ОС](./images/part_4.1.png)
## Part 5. Использование команды sudo
1. Команда `sudo` ( substitute user and do, подменить пользователя и выполнить ) позволяет строго определенным пользователям выполнять указанные программы с административными привилегиями без ввода пароля суперпользователя **root**. 
2. Даем права на **sudo** пользователю **hell** командой `sudo usermod -aG sudo men`.
3. Обновление hostname:
* ` sudo su hell`
* ` sudo hostnamectl set-hostname test`
* ` hostnamectl` <br>
![смена имени хоста](./images/part_5.1.png)
## Part 6. Установка и настройка службы времени
1. При установке настройки времени были применены автоматически
Использованные команды:
* `timedatectl show` <br>
![вывод инфо по времени](./images/part_6.1.png)
## Part 7. Установка и использование текстовых редакторов
1. Создаем файл при помощи vim `vim test_vim.txt`
![Создаем файл при помощи vim](./images/part_7.1.png)<br>
Пишем dejaneom, жмем `ESC`, пишем `:wq`
2. Создаем файл при помощи nano `nano test_nano.txt`
![Создаем файл при помощи nano](./images/part_7.2.png)<br>
Пишем dejaneom, жмем `control+x`, жмем `y`, `enter`
3. * Устанавливаем редактор MCEDIT командой `sudo apt install mc`
* Создаем файл при помощи MCEDIT `mcedit test_mcedit.txt`
![Создаем файл при помощи MCEDIT](./images/part_7.3.png)<br>
Пишем dejaneom, жмем `F2`, жмем `enter`, `F10`
4. Открываем файл при помощи vim `vim test_vim.txt`
![Открываем файл при помощи vim](./images/part_7.4.png)<br>
Пишем `:%s/dejaneom/21 School 21/g` <br>
Для выхода без сохранения пишем `:q!`
5. Открываем файл при помощи nano `nano test_nano.txt`
![Открываем файл при помощи nano](./images/part_7.5.png)<br>
Жмем `Ctrl+\` пишем dejaneom, жмем `Enter` пишем 21 School 21, жмем `control+x`, жмем `y`, `enter` <br>
Для выхода без сохранения жмём `control+X`, `N`, `enter`
6. Открываем файл при помощи MCEDIT `mcedit test_mcedit.txt`
![Открываем файл при помощи MCEDIT](./images/part_7.6.png)<br>
Жмем `F4`, жмем `вниз`, пишем 21 School 21, жмем `enter`. <br>
Для выхода без сохранения жмём `f10`, `Нет`
7. Для поиска при помощи vim открываем файл и пишем `/` после текст для поиска
8. Для поиска при помощи nano открываем файл и жмем `control + W` после текст для поиска
9. Для поиска при помощи mcedit открываем файл и пишем `F7` после текст для поиска
## Part 8. Установка и базовая настройка сервиса SSHD
1. Установить службу SSHd `sudo apt install openssh-server`
![Установить службу SSHd](./images/part_8.1.png)
2. Автозагрузка `sudo systemctl enable sshd`
3. Для изменения порта на 2022 требуется отредактировать файл nano /etc/ssh/sshd_config Найти и заменить `#Port 22` на `Port 2022` <br>
![Замена порта](./images/part_8.2.png)
4. Для применения изменений `/etc/init.d/ssh restart`
5. **sshd** - это служба, принимающая запросы на соединения от клиентов. Обычно он запускается при загрузке системы из /etc/rc. Для каждого нового соединения создаётся (с помощью вызова fork) новый экземпляр службы. Ответвлённый экземпляр обрабатывает обмен ключами, шифрование, аутентификацию, выполнение команд и обмен данными. Эта реализация sshd поддерживает обе версии протокола SSH, 1 и 2, одновременно. 
6. Проверка наличия процесса sshd `ps -ef | grep sshd`
![Проверка наличия процесса sshd](./images/part_8.3.png)
Опция -e, показывает все процессы, а -f показывает полную информацию: UID - идентификатор пользователя выполняющего команду, PID - это идентификатор процесса команды, PPID - идентификатор родительского процесса, который отпустил команду, C - количество дочерних процессов, STIME - это время начала процесса, TTY, TIME, CMD.
7. Устанавливаем и запускаем `sudo apt install net-tools`, далее `netstat -tan`
![Устанавливаем и запускаем netstat](./images/part_8.4.png)
- a - показывать состояние всех сокетов. Обычно сокеты, используемые серверными процессами, не показываются.
- t - просмотр только tcp соединений
- n - показывать сетевые адреса как числа. netstat обычно показывает адреса как символы. Эту опцию можно использовать с любым форматом показа.
## Part 9. Установка и использование утилит top, htop
* Для установки пишем `sudo apt install htop`
* Запускаем `top`<br>
![Запускаем top](./images/part_9.1.png)
    - uptime: 3:31
    - количество авторизованных пользователей: 1
    - общая загрузка системы: 0,03, 0,02, 0,00
    - общее количество процессов: 96
    - загрузка памяти: 154,9
    - pid процесса занимающего больше всего памяти: 1
    - pid процесса, занимающего больше всего процессорного времени: 11
* Запускаем `htop`
    - отсортированный по PID <br>![Запускаем htop](./images/part_9.2.png)
    - отсортированный по PERCENT_CPU <br>![Запускаем htop](./images/part_9.3.png)
    - отсортированный по PERCENT_MEM <br>![Запускаем htop](./images/part_9.4.png)
    - отсортированный по TIME <br>![Запускаем htop](./images/part_9.5.png)
    - отфильтрованный для процесса sshd <br>![Запускаем htop](./images/part_9.6.png)
    - с процессом syslog, найденным, используя поиск <br>![Запускаем htop](./images/part_9.7.png)
    - с добавленным выводом hostname, clock и uptime <br>![Запускаем htop](./images/part_9.8.png)
## Part 10. Использование утилиты fdisk
* Для запуска утилиты fdisk пишем `sudo fdisk -l` <br>
![Запускаем fdisk](./images/part_10.1.png)
* Из вывода мы видим, что название `sda`, `25 GiB`, `52428800` секторов, это же и есть размер swap 
## Part 11. Использование утилиты df
* Для запуска утилиты df пишем `df`<br>
![Для запуска утилиты df](./images/part_11.1.png)
    - размер раздела: 11758760
    - размер занятого пространства: 5200468
    - размер свободного пространства: 5939184
    - процент использования: 47%
    - единицы измерения пространства: Килобайты
* Для запуска утилиты df -Th корневого раздела пишем `df -Th`<br>
![Для запуска утилиты df Th](./images/part_11.2.png)
- T - Выдавать тип для каждой файловой системы. Тип берётся от операционной системы (и определяется системно-зависимым способом, например посредством чтения файла /etc/mtab).
- h - Отобразит размер в человеко-читаемом формате, размерностью 1024, добавив названия единиц (Kибибайт, Mебибайт, Гибибайт, Tебибайт).
    - размер раздела: 12G
    - размер занятого пространства: 5,0G
    - размер свободного пространства: 5,7G
    - процент использования: 47%
    - тип файловой системы раздела: ext4
## Part 12. Использование утилиты du
* Для запуска du нужно ввести `du` <br>
![du нужно ввести](./images/part_12.1.png)
* Вывести размер папок /home, /var, /var/log `sudo du -s /home && sudo du -s /var && sudo du -s /var/log` <br>
![Вывести размер папок](./images/part_12.2.png)
* Вывести размер всего содержимого в /var/log `du -ah /var/log` <br>
![Вывести размер всего содержимого var log](./images/part_12.3.png)
## Part 13. Установка и использование утилиты ncdu
* Для установки ncdu пишем `sudo apt install ncdu`<br>
![Для установки ncdu](./images/part_13.1.png)
* Для запуска ncdu нужно ввести `ncdu`<br>
![du нужно ввести](./images/part_13.2.png)
* Вывести размер папки /home
`sudo ncdu /home`<br>
![размер папки /home](./images/part_13.3.png)
* Вывести размер папки /var
`sudo ncdu /var`<br>
![размер папки /var](./images/part_13.4.png)
* Вывести размер папки и содержимого /var/log
`sudo ncdu /var/log`<br>
![размер папки /var/log](./images/part_13.5.png)
## Part 14. Работа с системными журналами
* Время последней успешной авторизации, имя пользователя и метод входа в систему<br>
![Время последней](./images/part_14.1.png)
* Перезапустить службу SSHd и показать логи<br>
![Служба SSHd](./images/part_14.2.png)
## Part 15. Использование планировщика заданий CRON
* Установка cron `sudo apt install cron`
* Работа в фоновом режиме `sudo systemctl enable cron`<br>
![Работа в фоновом режиме](./images/part_15.1.png)
* Для редактирования `crontab -e`, далее выбрать редактор
* Назначаем команду для запуска каждые 2 минуты `*/2 * * * * uptime`<br>
![Назначаем команду](./images/part_15.3.png)
* Проверка автозапуска команды `uptime`<br>
![Проверка аптайм](./images/part_15.4.png)
* Проверяем текущие задачи cron `crontab -l`<br>
![Проверяем текущие задачи](./images/part_15.5.png)
* Для удаления задач cron пишем `crontab -r`<br>
![Для удаления задач cron](./images/part_15.6.png)

Готово!
